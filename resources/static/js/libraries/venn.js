(function(e,g){'object'==typeof exports&&'undefined'!=typeof module?g(exports,require('d3-selection'),require('d3-transition')):'function'==typeof define&&define.amd?define(['exports','d3-selection','d3-transition'],g):g(e.venn=e.venn||{},e.d3,e.d3)})(this,function(e,g){'use strict';function o(na,oa){var ua,pa=u(na),qa=pa.filter(function(Ka){return q(Ka,na)}),ra=0,sa=0,ta=[];if(1<qa.length){var va=C(qa);for(ua=0;ua<qa.length;++ua){var wa=qa[ua];wa.angle=Math.atan2(wa.x-va.x,wa.y-va.y)}qa.sort(function(Ka,La){return La.angle-Ka.angle});var xa=qa[qa.length-1];for(ua=0;ua<qa.length;++ua){var ya=qa[ua];sa+=(xa.x+ya.x)*(ya.y-xa.y);for(var za={x:(ya.x+xa.x)/2,y:(ya.y+xa.y)/2},Aa=null,Ba=0;Ba<ya.parentIndex.length;++Ba)if(-1<xa.parentIndex.indexOf(ya.parentIndex[Ba])){var Ca=na[ya.parentIndex[Ba]],Da=Math.atan2(ya.x-Ca.x,ya.y-Ca.y),Ea=Math.atan2(xa.x-Ca.x,xa.y-Ca.y),Fa=Ea-Da;0>Fa&&(Fa+=2*Math.PI);var Ga=Ea-Fa/2,Ha=z(za,{x:Ca.x+Ca.radius*Math.sin(Ga),y:Ca.y+Ca.radius*Math.cos(Ga)});(null==Aa||Aa.width>Ha)&&(Aa={circle:Ca,width:Ha,p1:ya,p2:xa})}null!==Aa&&(ta.push(Aa),ra+=w(Aa.circle.radius,Aa.width),xa=ya)}}else{var Ia=na[0];for(ua=1;ua<na.length;++ua)na[ua].radius<Ia.radius&&(Ia=na[ua]);var Ja=!1;for(ua=0;ua<na.length;++ua)if(z(na[ua],Ia)>Math.abs(Ia.radius-na[ua].radius)){Ja=!0;break}Ja?ra=sa=0:(ra=Ia.radius*Ia.radius*Math.PI,ta.push({circle:Ia,p1:{x:Ia.x,y:Ia.y+Ia.radius},p2:{x:Ia.x-la,y:Ia.y+Ia.radius},width:2*Ia.radius}))}return sa/=2,oa&&(oa.area=ra+sa,oa.arcArea=ra,oa.polygonArea=sa,oa.arcs=ta,oa.innerPoints=qa,oa.intersectionPoints=pa),ra+sa}function q(na,oa){for(var pa=0;pa<oa.length;++pa)if(z(na,oa[pa])>oa[pa].radius+la)return!1;return!0}function u(na){for(var oa=[],pa=0;pa<na.length;++pa)for(var ra,qa=pa+1;qa<na.length;++qa){ra=B(na[pa],na[qa]);for(var ta,sa=0;sa<ra.length;++sa)ta=ra[sa],ta.parentIndex=[pa,qa],oa.push(ta)}return oa}function v(na,oa){var pa=Math.sqrt(na*na-oa*oa);return oa*pa+na*na*Math.atan2(oa,pa)}function w(na,oa){return v(na,oa-na)-v(na,-na)}function z(na,oa){return Math.sqrt((na.x-oa.x)*(na.x-oa.x)+(na.y-oa.y)*(na.y-oa.y))}function A(na,oa,pa){if(pa>=na+oa)return 0;if(pa<=Math.abs(na-oa))return Math.PI*Math.min(na,oa)*Math.min(na,oa);return w(na,na-(pa*pa-oa*oa+na*na)/(2*pa))+w(oa,oa-(pa*pa-na*na+oa*oa)/(2*pa))}function B(na,oa){var pa=z(na,oa),qa=na.radius,ra=oa.radius;if(pa>=qa+ra||pa<=Math.abs(qa-ra))return[];var sa=(qa*qa-ra*ra+pa*pa)/(2*pa),ta=Math.sqrt(qa*qa-sa*sa),ua=na.x+sa*(oa.x-na.x)/pa,va=na.y+sa*(oa.y-na.y)/pa,wa=-(oa.y-na.y)*(ta/pa),xa=-(oa.x-na.x)*(ta/pa);return[{x:ua+wa,y:va-xa},{x:ua-wa,y:va+xa}]}function C(na){for(var oa={x:0,y:0},pa=0;pa<na.length;++pa)oa.x+=na[pa].x,oa.y+=na[pa].y;return oa.x/=na.length,oa.y/=na.length,oa}function D(na,oa,pa,qa){qa=qa||{};var ra=qa.maxIterations||100,sa=qa.tolerance||1e-10,ta=na(oa),ua=na(pa),va=pa-oa;if(0<ta*ua)throw'Initial bisect points must have opposite signs';if(0===ta)return oa;if(0===ua)return pa;for(var wa=0;wa<ra;++wa){va/=2;var xa=oa+va,ya=na(xa);if(0<=ya*ta&&(oa=xa),Math.abs(va)<sa||0===ya)return xa}return oa+va}function E(na){for(var oa=Array(na),pa=0;pa<na;++pa)oa[pa]=0;return oa}function F(na,oa){return E(na).map(function(){return E(oa)})}function G(na,oa){for(var pa=0,qa=0;qa<na.length;++qa)pa+=na[qa]*oa[qa];return pa}function H(na){return Math.sqrt(G(na,na))}function I(na,oa,pa){for(var qa=0;qa<oa.length;++qa)na[qa]=oa[qa]*pa}function J(na,oa,pa,qa,ra){for(var sa=0;sa<na.length;++sa)na[sa]=oa*pa[sa]+qa*ra[sa]}function K(na,oa,pa){function qa(Pa){for(var Qa=0;Qa<Pa.length;Qa++)Ca[Ba][Qa]=Pa[Qa];Ca[Ba].fx=Pa.fx}pa=pa||{};var Aa,ra=pa.maxIterations||200*oa.length,sa=pa.nonZeroDelta||1.05,ta=pa.zeroDelta||1e-3,ua=pa.minErrorDelta||1e-6,va=pa.minErrorDelta||1e-5,wa=void 0===pa.rho?1:pa.rho,xa=void 0===pa.chi?2:pa.chi,ya=void 0===pa.psi?-0.5:pa.psi,za=void 0===pa.sigma?0.5:pa.sigma,Ba=oa.length,Ca=Array(Ba+1);Ca[0]=oa,Ca[0].fx=na(oa),Ca[0].id=0;for(var Ea,Da=0;Da<Ba;++Da)Ea=oa.slice(),Ea[Da]=Ea[Da]?Ea[Da]*sa:ta,Ca[Da+1]=Ea,Ca[Da+1].fx=na(Ea),Ca[Da+1].id=Da+1;for(var Fa=function(Pa,Qa){return Pa.fx-Qa.fx},Ga=oa.slice(),Ha=oa.slice(),Ia=oa.slice(),Ja=oa.slice(),Ka=0;Ka<ra;++Ka){if(Ca.sort(Fa),pa.history){var La=Ca.map(function(Pa){var Qa=Pa.slice();return Qa.fx=Pa.fx,Qa.id=Pa.id,Qa});La.sort(function(Pa,Qa){return Pa.id-Qa.id}),pa.history.push({x:Ca[0].slice(),fx:Ca[0].fx,simplex:La})}for(Aa=0,Da=0;Da<Ba;++Da)Aa=Math.max(Aa,Math.abs(Ca[0][Da]-Ca[1][Da]));if(Math.abs(Ca[0].fx-Ca[Ba].fx)<ua&&Aa<va)break;for(Da=0;Da<Ba;++Da){Ga[Da]=0;for(var Ma=0;Ma<Ba;++Ma)Ga[Da]+=Ca[Ma][Da];Ga[Da]/=Ba}var Na=Ca[Ba];if(J(Ha,1+wa,Ga,-wa,Na),Ha.fx=na(Ha),Ha.fx<Ca[0].fx)J(Ja,1+xa,Ga,-xa,Na),Ja.fx=na(Ja),Ja.fx<Ha.fx?qa(Ja):qa(Ha);else if(Ha.fx>=Ca[Ba-1].fx){var Oa=!1;if(Ha.fx>Na.fx?(J(Ia,1+ya,Ga,-ya,Na),Ia.fx=na(Ia),Ia.fx<Na.fx?qa(Ia):Oa=!0):(J(Ia,1-ya*wa,Ga,ya*wa,Na),Ia.fx=na(Ia),Ia.fx<Ha.fx?qa(Ia):Oa=!0),Oa){if(1<=za)break;for(Da=1;Da<Ca.length;++Da)J(Ca[Da],1-za,Ca[0],za,Ca[Da]),Ca[Da].fx=na(Ca[Da])}}else qa(Ha)}return Ca.sort(Fa),{fx:Ca[0].fx,x:Ca[0]}}function L(na,oa,pa,qa,ra,sa,ta){function ua(Ca,Da,Ea){for(var Fa=0;16>Fa;++Fa)if(ra=(Ca+Da)/2,J(qa.x,1,pa.x,ra,oa),xa=qa.fx=na(qa.x,qa.fxprime),za=G(qa.fxprime,oa),xa>va+sa*ra*wa||xa>=Ea)Da=ra;else{if(Math.abs(za)<=-ta*wa)return ra;0<=za*(Da-Ca)&&(Da=Ca),Ca=ra,Ea=xa}return 0}var va=pa.fx,wa=G(pa.fxprime,oa),xa=va,ya=va,za=wa,Aa=0;ra=ra||1,sa=sa||1e-6,ta=ta||0.1;for(var Ba=0;10>Ba;++Ba){if(J(qa.x,1,pa.x,ra,oa),xa=qa.fx=na(qa.x,qa.fxprime),za=G(qa.fxprime,oa),xa>va+sa*ra*wa||Ba&&xa>=ya)return ua(Aa,ra,ya);if(Math.abs(za)<=-ta*wa)return ra;if(0<=za)return ua(ra,Aa,xa);ya=xa,Aa=ra,ra*=2}return ra}function M(na,oa,pa){var ta,ua,wa,qa={x:oa.slice(),fx:0,fxprime:oa.slice()},ra={x:oa.slice(),fx:0,fxprime:oa.slice()},sa=oa.slice(),va=1;pa=pa||{},wa=pa.maxIterations||20*oa.length,qa.fx=na(qa.x,qa.fxprime),ta=qa.fxprime.slice(),I(ta,qa.fxprime,-1);for(var xa=0;xa<wa;++xa){if(va=L(na,ta,qa,ra,va),pa.history&&pa.history.push({x:qa.x.slice(),fx:qa.fx,fxprime:qa.fxprime.slice(),alpha:va}),!va)I(ta,qa.fxprime,-1);else{J(sa,1,ra.fxprime,-1,qa.fxprime);var ya=G(qa.fxprime,qa.fxprime),za=Math.max(0,G(sa,ra.fxprime)/ya);J(ta,za,ta,-1,ra.fxprime),ua=qa,qa=ra,ra=ua}if(1e-5>=H(qa.fxprime))break}return pa.history&&pa.history.push({x:qa.x.slice(),fx:qa.fx,fxprime:qa.fxprime.slice(),alpha:va}),qa}function O(na,oa){oa=oa||{},oa.maxIterations=oa.maxIterations||500;var pa=oa.initialLayout||T;na=Q(na);var qa=pa(na),ra=[],sa=[],ta;for(ta in qa)qa.hasOwnProperty(ta)&&(ra.push(qa[ta].x),ra.push(qa[ta].y),sa.push(ta));for(var va=K(function(ya){for(var Ba,za={},Aa=0;Aa<sa.length;++Aa)Ba=sa[Aa],za[Ba]={x:ya[2*Aa],y:ya[2*Aa+1],radius:qa[Ba].radius};return W(za,na)},ra,oa),wa=va.x,xa=0;xa<sa.length;++xa)ta=sa[xa],qa[ta].x=wa[2*xa],qa[ta].y=wa[2*xa+1];return qa}function P(na,oa,pa){return Math.min(na,oa)*Math.min(na,oa)*Math.PI<=pa+ma?Math.abs(na-oa):D(function(qa){return A(na,oa,qa)-pa},0,na+oa)}function Q(na){na=na.slice();var qa,ra,sa,ta,oa=[],pa={};for(qa=0;qa<na.length;++qa){var ua=na[qa];1==ua.sets.length?oa.push(ua.sets[0]):2==ua.sets.length&&(sa=ua.sets[0],ta=ua.sets[1],pa[[sa,ta]]=!0,pa[[ta,sa]]=!0)}for(oa.sort(function(va,wa){return va>wa}),qa=0;qa<oa.length;++qa)for(sa=oa[qa],ra=qa+1;ra<oa.length;++ra)ta=oa[ra],[sa,ta]in pa||na.push({sets:[sa,ta],size:0});return na}function R(na,oa,pa){var qa=F(oa.length,oa.length),ra=F(oa.length,oa.length);return na.filter(function(sa){return 2==sa.sets.length}).map(function(sa){var ta=pa[sa.sets[0]],ua=pa[sa.sets[1]],va=Math.sqrt(oa[ta].size/Math.PI),wa=Math.sqrt(oa[ua].size/Math.PI),xa=P(va,wa,sa.size);qa[ta][ua]=qa[ua][ta]=xa;var ya=0;sa.size+1e-10>=Math.min(oa[ta].size,oa[ua].size)?ya=1:1e-10>=sa.size&&(ya=-1),ra[ta][ua]=ra[ua][ta]=ya}),{distances:qa,constraints:ra}}function S(na,oa,pa,qa){var sa,ra=0;for(sa=0;sa<oa.length;++sa)oa[sa]=0;for(sa=0;sa<pa.length;++sa)for(var ta=na[2*sa],ua=na[2*sa+1],va=sa+1;va<pa.length;++va){var wa=na[2*va],xa=na[2*va+1],ya=pa[sa][va],za=qa[sa][va],Aa=(wa-ta)*(wa-ta)+(xa-ua)*(xa-ua),Ba=Math.sqrt(Aa),Ca=Aa-ya*ya;0<za&&Ba<=ya||0>za&&Ba>=ya||(ra+=2*Ca*Ca,oa[2*sa]+=4*Ca*(ta-wa),oa[2*sa+1]+=4*Ca*(ua-xa),oa[2*va]+=4*Ca*(wa-ta),oa[2*va+1]+=4*Ca*(xa-ua))}return ra}function T(na,oa){var pa=V(na,oa);if(8<=na.length){var qa=U(na,oa),ra=W(qa,na),sa=W(pa,na);ra+1e-8<sa&&(pa=qa)}return pa}function U(na,oa){oa=oa||{};var pa=oa.restarts||10,qa=[],ra={},sa;for(sa=0;sa<na.length;++sa){var ta=na[sa];1==ta.sets.length&&(ra[ta.sets[0]]=qa.length,qa.push(ta))}var ua=R(na,qa,ra),va=ua.distances,wa=ua.constraints,xa=H(va.map(H))/va.length;va=va.map(function(Fa){return Fa.map(function(Ga){return Ga/xa})});var ya=function(Fa,Ga){return S(Fa,Ga,va,wa)},za,Aa;for(sa=0;sa<pa;++sa){var Ba=E(2*va.length).map(Math.random);Aa=M(ya,Ba,oa),(!za||Aa.fx<za.fx)&&(za=Aa)}var Ca=za.x,Da={};for(sa=0;sa<qa.length;++sa){var Ea=qa[sa];Da[Ea.sets[0]]={x:Ca[2*sa]*xa,y:Ca[2*sa+1]*xa,radius:Math.sqrt(Ea.size/Math.PI)}}if(oa.history)for(sa=0;sa<oa.history.length;++sa)I(oa.history[sa].x,xa);return Da}function V(na){function oa(Ra,Sa){return Sa.size-Ra.size}function pa(Ra){return Ra.set in Ca}function qa(Ra,Sa){ra[Sa].x=Ra.x,ra[Sa].y=Ra.y,Ca[Sa]=!0}for(var ta,va,ra={},sa={},ua=0;ua<na.length;++ua)va=na[ua],1==va.sets.length&&(ta=va.sets[0],ra[ta]={x:1e10,y:1e10,rowid:ra.length,size:va.size,radius:Math.sqrt(va.size/Math.PI)},sa[ta]=[]);for(na=na.filter(function(Ra){return 2==Ra.sets.length}),ua=0;ua<na.length;++ua){var wa=na[ua],xa=wa.hasOwnProperty('weight')?wa.weight:1,ya=wa.sets[0],za=wa.sets[1];wa.size+ma>=Math.min(ra[ya].size,ra[za].size)&&(xa=0),sa[ya].push({set:za,size:wa.size,weight:xa}),sa[za].push({set:ya,size:wa.size,weight:xa})}var Aa=[];for(ta in sa)if(sa.hasOwnProperty(ta)){var Ba=0;for(ua=0;ua<sa[ta].length;++ua)Ba+=sa[ta][ua].size*sa[ta][ua].weight;Aa.push({set:ta,size:Ba})}Aa.sort(oa);var Ca={};for(qa({x:0,y:0},Aa[0].set),ua=1;ua<Aa.length;++ua){var Da=Aa[ua].set,Ea=sa[Da].filter(pa);if(ta=ra[Da],Ea.sort(oa),0===Ea.length)throw'ERROR: missing pairwise overlap information';for(var Fa=[],Ga=0;Ga<Ea.length;++Ga){var Ha=ra[Ea[Ga].set],Ia=P(ta.radius,Ha.radius,Ea[Ga].size);Fa.push({x:Ha.x+Ia,y:Ha.y}),Fa.push({x:Ha.x-Ia,y:Ha.y}),Fa.push({y:Ha.y+Ia,x:Ha.x}),Fa.push({y:Ha.y-Ia,x:Ha.x});for(var Ja=Ga+1;Ja<Ea.length;++Ja)for(var Ka=ra[Ea[Ja].set],La=P(ta.radius,Ka.radius,Ea[Ja].size),Ma=B({x:Ha.x,y:Ha.y,radius:Ia},{x:Ka.x,y:Ka.y,radius:La}),Na=0;Na<Ma.length;++Na)Fa.push(Ma[Na])}var Oa=1e50,Pa=Fa[0];for(Ga=0;Ga<Fa.length;++Ga){ra[Da].x=Fa[Ga].x,ra[Da].y=Fa[Ga].y;var Qa=W(ra,na);Qa<Oa&&(Oa=Qa,Pa=Fa[Ga])}qa(Pa,Da)}return ra}function W(na,oa){function pa(xa){return xa.map(function(ya){return na[ya]})}for(var qa=0,ra=0;ra<oa.length;++ra){var ta,sa=oa[ra];if(1==sa.sets.length)continue;else if(2==sa.sets.length){var ua=na[sa.sets[0]],va=na[sa.sets[1]];ta=A(ua.radius,va.radius,z(ua,va))}else ta=o(pa(sa.sets));var wa=sa.hasOwnProperty('weight')?sa.weight:1;qa+=wa*(ta-sa.size)*(ta-sa.size)}return qa}function X(na,oa,pa){null===pa?na.sort(function(Ba,Ca){return Ca.radius-Ba.radius}):na.sort(pa);var qa;if(0<na.length){var ra=na[0].x,sa=na[0].y;for(qa=0;qa<na.length;++qa)na[qa].x-=ra,na[qa].y-=sa}if(1<na.length){var wa,xa,ta=Math.atan2(na[1].x,na[1].y)-oa,ua=Math.cos(ta),va=Math.sin(ta);for(qa=0;qa<na.length;++qa)wa=na[qa].x,xa=na[qa].y,na[qa].x=ua*wa-va*xa,na[qa].y=va*wa+ua*xa}if(2<na.length){for(var ya=Math.atan2(na[2].x,na[2].y)-oa;0>ya;)ya+=2*Math.PI;for(;ya>2*Math.PI;)ya-=2*Math.PI;if(ya>Math.PI){var za=na[1].y/(1e-10+na[1].x);for(qa=0;qa<na.length;++qa){var Aa=(na[qa].x+za*na[qa].y)/(1+za*za);na[qa].x=2*Aa-na[qa].x,na[qa].y=2*Aa*za-na[qa].y}}}}function Y(na){function oa(wa){return wa.parent!==wa&&(wa.parent=oa(wa.parent)),wa.parent}function pa(wa,xa){var ya=oa(wa),za=oa(xa);ya.parent=za}na.map(function(wa){wa.parent=wa});for(var qa=0;qa<na.length;++qa)for(var sa,ra=qa+1;ra<na.length;++ra)sa=na[qa].radius+na[ra].radius,z(na[qa],na[ra])+1e-10<sa&&pa(na[ra],na[qa]);var ua,ta={};for(qa=0;qa<na.length;++qa)ua=oa(na[qa]).parent.setid,ua in ta||(ta[ua]=[]),ta[ua].push(na[qa]);na.map(function(wa){delete wa.parent});var va=[];for(ua in ta)ta.hasOwnProperty(ua)&&va.push(ta[ua]);return va}function Z(na){var oa=function(pa){var qa=Math.max.apply(null,na.map(function(sa){return sa[pa]+sa.radius})),ra=Math.min.apply(null,na.map(function(sa){return sa[pa]-sa.radius}));return{max:qa,min:ra}};return{xRange:oa('x'),yRange:oa('y')}}function $(na,oa,pa){function qa(Ba,Ca,Da){if(Ba){var Fa,Ga,Ha,Ea=Ba.bounds;Ca?Fa=xa.xRange.max-Ea.xRange.min+ya:(Fa=xa.xRange.max-Ea.xRange.max,Ha=(Ea.xRange.max-Ea.xRange.min)/2-(xa.xRange.max-xa.xRange.min)/2,0>Ha&&(Fa+=Ha)),Da?Ga=xa.yRange.max-Ea.yRange.min+ya:(Ga=xa.yRange.max-Ea.yRange.max,Ha=(Ea.yRange.max-Ea.yRange.min)/2-(xa.yRange.max-xa.yRange.min)/2,0>Ha&&(Ga+=Ha));for(var Ia=0;Ia<Ba.length;++Ia)Ba[Ia].x+=Fa,Ba[Ia].y+=Ga,ra.push(Ba[Ia])}}null===oa&&(oa=Math.PI/2);var sa,ta,ra=[];for(ta in na)if(na.hasOwnProperty(ta)){var ua=na[ta];ra.push({x:ua.x,y:ua.y,radius:ua.radius,setid:ta})}var va=Y(ra);for(sa=0;sa<va.length;++sa){X(va[sa],oa,pa);var wa=Z(va[sa]);va[sa].size=(wa.xRange.max-wa.xRange.min)*(wa.yRange.max-wa.yRange.min),va[sa].bounds=wa}va.sort(function(Ba,Ca){return Ca.size-Ba.size}),ra=va[0];for(var xa=ra.bounds,ya=(xa.xRange.max-xa.xRange.min)/50,za=1;za<va.length;)qa(va[za],!0,!1),qa(va[za+1],!1,!0),qa(va[za+2],!0,!0),za+=3,xa=Z(ra);var Aa={};for(sa=0;sa<ra.length;++sa)Aa[ra[sa].setid]=ra[sa];return Aa}function aa(na,oa,pa,qa){var ra=[],sa=[];for(var ta in na)na.hasOwnProperty(ta)&&(sa.push(ta),ra.push(na[ta]));oa-=2*qa,pa-=2*qa;for(var Ea,ua=Z(ra),va=ua.xRange,wa=ua.yRange,xa=oa/(va.max-va.min),ya=pa/(wa.max-wa.min),za=Math.min(ya,xa),Aa=(oa-(va.max-va.min)*za)/2,Ba=(pa-(wa.max-wa.min)*za)/2,Ca={},Da=0;Da<ra.length;++Da)Ea=ra[Da],Ca[sa[Da]]={radius:za*Ea.radius,x:qa+Aa+(Ea.x-va.min)*za,y:qa+Ba+(Ea.y-wa.min)*za};return Ca}function ca(na,oa){return function(){for(var ya,pa=g.select(this),qa=pa.datum(),ra=na[qa.sets[0]].radius||50,sa=oa(qa)||'',ta=sa.split(/\s+/).reverse(),va=(sa.length+ta.length)/3,wa=ta.pop(),xa=[wa],za=0,Aa=1.1,Ba=pa.text(null).append('tspan').text(wa);wa=ta.pop(),!!wa;)xa.push(wa),ya=xa.join(' '),Ba.text(ya),ya.length>va&&Ba.node().getComputedTextLength()>ra&&(xa.pop(),Ba.text(xa.join(' ')),xa=[wa],Ba=pa.append('tspan').text(wa),za++);var Ca=0.35-za*Aa/2,Da=pa.attr('x'),Ea=pa.attr('y');pa.selectAll('tspan').attr('x',Da).attr('y',Ea).attr('dy',function(Fa,Ga){return Ca+Ga*Aa+'em'})}}function da(na,oa,pa){var ra,sa,qa=oa[0].radius-z(oa[0],na);for(ra=1;ra<oa.length;++ra)sa=oa[ra].radius-z(oa[ra],na),sa<=qa&&(qa=sa);for(ra=0;ra<pa.length;++ra)sa=z(pa[ra],na)-pa[ra].radius,sa<=qa&&(qa=sa);return qa}function ea(na,oa){var qa,pa=[];for(qa=0;qa<na.length;++qa){var ra=na[qa];pa.push({x:ra.x,y:ra.y}),pa.push({x:ra.x+ra.radius/2,y:ra.y}),pa.push({x:ra.x-ra.radius/2,y:ra.y}),pa.push({x:ra.x,y:ra.y+ra.radius/2}),pa.push({x:ra.x,y:ra.y-ra.radius/2})}var sa=pa[0],ta=da(pa[0],na,oa);for(qa=1;qa<pa.length;++qa){var ua=da(pa[qa],na,oa);ua>=ta&&(sa=pa[qa],ta=ua)}var va=K(function(za){return-1*da({x:za[0],y:za[1]},na,oa)},[sa.x,sa.y],{maxIterations:500,minErrorDelta:1e-10}).x,wa={x:va[0],y:va[1]},xa=!0;for(qa=0;qa<na.length;++qa)if(z(wa,na[qa])>na[qa].radius){xa=!1;break}for(qa=0;qa<oa.length;++qa)if(z(wa,oa[qa])<oa[qa].radius){xa=!1;break}if(!xa)if(1==na.length)wa={x:na[0].x,y:na[0].y};else{var ya={};o(na,ya),wa=0===ya.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==ya.arcs.length?{x:ya.arcs[0].circle.x,y:ya.arcs[0].circle.y}:oa.length?ea(na,[]):C(ya.arcs.map(function(za){return za.p1}))}return wa}function fa(na){var oa={},pa=[];for(var qa in na)pa.push(qa),oa[qa]=[];for(var sa,ra=0;ra<pa.length;ra++){sa=na[pa[ra]];for(var ta=ra+1;ta<pa.length;++ta){var ua=na[pa[ta]],va=z(sa,ua);va+ua.radius<=sa.radius+1e-10?oa[pa[ta]].push(pa[ra]):va+sa.radius<=ua.radius+1e-10&&oa[pa[ra]].push(pa[ta])}}return oa}function ga(na,oa){for(var pa={},qa=fa(na),ra=0;ra<oa.length;++ra){for(var sa=oa[ra].sets,ta={},ua={},va=0;va<sa.length;++va){ta[sa[va]]=!0;for(var wa=qa[sa[va]],xa=0;xa<wa.length;++xa)ua[wa[xa]]=!0}var ya=[],za=[];for(var Aa in na)Aa in ta?ya.push(na[Aa]):Aa in ua||za.push(na[Aa]);var Ba=ea(ya,za);pa[sa]=Ba,Ba.disjoint&&0<oa[ra].size&&console.log('WARNING: area '+sa+' not represented on screen')}return pa}function ia(na,oa,pa){return['\nM',na,oa,'\nm',-pa,0,'\na',pa,pa,0,1,0,2*pa,0,'\na',pa,pa,0,1,0,2*-pa,0].join(' ')}function ja(na){var oa=na.split(' ');return{x:parseFloat(oa[1]),y:parseFloat(oa[2]),radius:-parseFloat(oa[4])}}function ka(na){var oa={};o(na,oa);var pa=oa.arcs;if(0===pa.length)return'M 0 0';if(1==pa.length){var qa=pa[0].circle;return ia(qa.x,qa.y,qa.radius)}for(var ra=['\nM',pa[0].p2.x,pa[0].p2.y],sa=0;sa<pa.length;++sa){var ta=pa[sa],ua=ta.circle.radius,va=ta.width>ua;ra.push('\nA',ua,ua,0,va?1:0,1,ta.p1.x,ta.p1.y)}return ra.join(' ')}var la=1e-10,ma=1e-10;e.intersectionArea=o,e.circleCircleIntersection=B,e.circleOverlap=A,e.circleArea=w,e.distance=z,e.circleIntegral=v,e.venn=O,e.greedyLayout=V,e.scaleSolution=aa,e.normalizeSolution=$,e.bestInitialLayout=T,e.lossFunction=W,e.disjointCluster=Y,e.distanceFromIntersectArea=P,e.VennDiagram=function(){function na(Ea){var Fa=Ea.datum(),Ga=Da(Fa);ua&&(Ga=$(Ga,ta,ya));var Ha=aa(Ga,pa,qa,ra),Ia=ga(Ha,Fa);Ea.selectAll('svg').data([Ha]).enter().append('svg');var Ja=Ea.select('svg').attr('width',pa).attr('height',qa),Ka={},La=!1;Ja.selectAll('.venn-area path').each(function(Va){var Wa=g.select(this).attr('d');1==Va.sets.length&&Wa&&(La=!0,Ka[Va.sets[0]]=ja(Wa))});var Ma=function(Va){return function(Wa){var Xa=Va.sets.map(function(Ya){var Za=Ka[Ya],$a=Ha[Ya];return Za||(Za={x:pa/2,y:qa/2,radius:1}),$a||($a={x:pa/2,y:qa/2,radius:1}),{x:Za.x*(1-Wa)+$a.x*Wa,y:Za.y*(1-Wa)+$a.y*Wa,radius:Za.radius*(1-Wa)+$a.radius*Wa}});return ka(Xa)}},Na=Ja.selectAll('.venn-area').data(Fa,function(Va){return Va.sets}),Oa=Na.enter().append('g').attr('class',function(Va){return'venn-area venn-'+(1==Va.sets.length?'circle':'intersection')}).attr('data-venn-sets',function(Va){return Va.sets.join('_')}),Pa=Oa.append('path'),Qa=Oa.append('text').attr('class','label').text(function(Va){return oa(Va)}).attr('text-anchor','middle').attr('dy','.35em').attr('x',pa/2).attr('y',qa/2);wa&&(Pa.style('fill-opacity','0').filter(function(Va){return 1==Va.sets.length}).style('fill',function(Va){return Ca(oa(Va))}).style('fill-opacity','.25'),Qa.style('fill',function(Va){return 1==Va.sets.length?Ca(oa(Va)):'#444'}));var Ra=Ea;La?(Ra=Ea.transition('venn').duration(sa),Ra.selectAll('path').attrTween('d',Ma)):Ra.selectAll('path').attr('d',function(Va){return ka(Va.sets.map(function(Wa){return Ha[Wa]}))});var Sa=Ra.selectAll('text').filter(function(Va){return Va.sets in Ia}).text(function(Va){return oa(Va)}).attr('x',function(Va){return Math.floor(Ia[Va.sets].x)}).attr('y',function(Va){return Math.floor(Ia[Va.sets].y)});va&&(La?'on'in Sa?Sa.on('end',ca(Ha,oa)):Sa.each('end',ca(Ha,oa)):Sa.each(ca(Ha,oa)));var Ta=Na.exit().transition('venn').duration(sa).remove();Ta.selectAll('path').attrTween('d',Ma);var Ua=Ta.selectAll('text').attr('x',pa/2).attr('y',qa/2);return null!==xa&&(Qa.style('font-size','0px'),Sa.style('font-size',xa),Ua.style('font-size','0px')),{circles:Ha,textCentres:Ia,nodes:Na,enter:Oa,update:Ra,exit:Ta}}function oa(Ea){return Ea.label?Ea.label:1==Ea.sets.length?''+Ea.sets[0]:void 0}var pa=600,qa=350,ra=15,sa=1e3,ta=Math.PI/2,ua=!0,va=!0,wa=!0,xa=null,ya=null,za={},Aa=['#1f77b4','#ff7f0e','#2ca02c','#d62728','#9467bd','#8c564b','#e377c2','#7f7f7f','#bcbd22','#17becf'],Ba=0,Ca=function(Ea){if(Ea in za)return za[Ea];var Fa=za[Ea]=Aa[Ba];return Ba+=1,Ba>=Aa.length&&(Ba=0),Fa},Da=O;return na.wrap=function(Ea){return arguments.length?(va=Ea,na):va},na.width=function(Ea){return arguments.length?(pa=Ea,na):pa},na.height=function(Ea){return arguments.length?(qa=Ea,na):qa},na.padding=function(Ea){return arguments.length?(ra=Ea,na):ra},na.colours=function(Ea){return arguments.length?(Ca=Ea,na):Ca},na.fontSize=function(Ea){return arguments.length?(xa=Ea,na):xa},na.duration=function(Ea){return arguments.length?(sa=Ea,na):sa},na.layoutFunction=function(Ea){return arguments.length?(Da=Ea,na):Da},na.normalize=function(Ea){return arguments.length?(ua=Ea,na):ua},na.styled=function(Ea){return arguments.length?(wa=Ea,na):wa},na.orientation=function(Ea){return arguments.length?(ta=Ea,na):ta},na.orientationOrder=function(Ea){return arguments.length?(ya=Ea,na):ya},na},e.wrapText=ca,e.computeTextCentres=ga,e.computeTextCentre=ea,e.sortAreas=function(na,oa){function pa(xa){for(var ya=0;ya<xa.length;++ya)if(!(xa[ya]in ra))return!1;return!0}for(var ta,qa=fa(na.selectAll('svg').datum()),ra={},sa=0;sa<oa.sets.length;++sa)for(var ua in ta=oa.sets[sa],qa)for(var va=qa[ua],wa=0;wa<va.length;++wa)if(va[wa]==ta){ra[ua]=!0;break}na.selectAll('g').sort(function(xa,ya){return xa.sets.length==ya.sets.length?xa==oa?pa(ya.sets)?-1:1:ya==oa?pa(xa.sets)?1:-1:ya.size-xa.size:xa.sets.length-ya.sets.length})},e.circlePath=ia,e.circleFromPath=ja,e.intersectionAreaPath=ka,Object.defineProperty(e,'__esModule',{value:!0})});